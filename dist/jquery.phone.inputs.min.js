!function(e,t){e.fn.phoneInputs=function(n){var a=e.extend({countriesUrl:"https://restcountries.eu/rest/v2/all",multiple:!0,defaultCountry:null,countryCodeAttr:"alpha2Code",countryNameAttr:"name",countryCallPrefix:"callingCodes",limit:1,lineTemplate:"#phone-inputs-line-template",inputName:"phone",inputCountryName:"country",inputNumberName:"number",inputDefaultName:"default",inputNameAttr:"data-form-name",inputCountryNameAttr:"data-form-country-name",inputNumberNameAttr:"data-form-number-name",inputDefaultNameAttr:"data-form-default-name",addLineBtnClass:"btn-phone-inputs-add-line",deleteLineBtnClass:"btn-phone-inputs-delete-line",checkboxInputSectionClass:"phone-inputs-default-checkbox-section",lineClass:"phone-inputs-line",required:!1},n),i={debug:"phone.inputs.debug",lineDelete:"phone.inputs.line.delete",change:"phone.inputs.change",lineAdded:"phone.inputs.line.added",defaultChoose:"phone.inputs.default.choose"};let u=[];const r=this;var l;function o(n,r,l=null){var o=e(t).find(a.lineTemplate).text(),s=e(o);r.find(`.${a.lineClass}`).length<a.limit?(a.multiple?(0==r.find(`.${a.lineClass}`).length?(s.find(`.${a.deleteLineBtnClass}`).css({display:"none"}),s.find('input[type="checkbox"]').prop("checked",!0)):s.find(`.${a.addLineBtnClass}`).css({display:"none"}),s.find("select").attr("name",`${r.attr(a.inputNameAttr)}[${r.find(`.${a.lineClass}`).length}][${r.attr(a.inputCountryNameAttr)}]`),s.find('input[type="text"]').attr("name",`${r.attr(a.inputNameAttr)}[${r.find(`.${a.lineClass}`).length}][${r.attr(a.inputNumberNameAttr)}]`),s.find('input[type="checkbox"]').attr("name",`${r.attr(a.inputNameAttr)}[${r.find(`.${a.lineClass}`).length}][${r.attr(a.inputDefaultNameAttr)}]`),s.find('input[type="checkbox"]').change(function(t){let a={country:s.find("select").val(),default:!0,number:s.find('input[type="text"]').val()};var u=jQuery.Event(i.defaultChoose);p(n,u,[{message:"Choosing a default number",data:a}]),d(n,i.debug,[{message:"Choosing a default number",data:a}]),u.isDefaultPrevented()||(r.find('input[type="checkbox"]').prop("checked",!1),e(this).prop("checked",!0),p(n,i.change,[{message:"Default number choosed",data:a}]),d(n,i.debug,[{message:"Default number choosed",data:a}]))})):(s.find(`.${a.deleteLineBtnClass}`).css({display:"none"}),s.find(`.${a.addLineBtnClass}`).css({display:"none"}),s.find('input[type="checkbox"]').css({display:"none"}),s.find(`.${a.checkboxInputSectionClass}`).css({display:"none"}),s.find("select").attr("name",`${r.attr(a.inputNameAttr)}[${r.attr(a.inputCountryNameAttr)}]`),s.find('input[type="text"]').attr("name",`${r.attr(a.inputNameAttr)}[${r.attr(a.inputNumberNameAttr)}]`),s.find('input[type="checkbox"]').attr("name",`${r.attr(a.inputNameAttr)}[${r.attr(a.inputDefaultNameAttr)}]`)),null!=l&&(s.find('input[type="text"]').val(l.number),s.find('input[type="checkbox"]').prop("checked",l.default)),a.required||r.attr("required")?(s.find("select").prop("required",!0),s.find('input[type="text"]').prop("required",!0)):(s.find("select").prop("required",!1),s.find('input[type="text"]').prop("required",!1)),s.find("select").find("option").remove(),u.forEach(t=>{var i=e(`<option value="${t[a.countryCodeAttr]}">${t[a.countryNameAttr]} (+${t[a.countryCallPrefix]})</option>`);null!=l?null!=l.coutry?t[a.countryCodeAttr].toLowerCase()==l.country.toLowerCase()&&i.prop("selected",!0):d(n,event.debug,[{message:"The country attribute cannot be null.",data:l}]):null!=a.defaultCountry&&t[a.countryCodeAttr].toLowerCase()==a.defaultCountry.toLowerCase()&&i.prop("selected",!0),s.find("select").append(i)}),r.append(s),p(n,i.lineAdded,[{message:"A new phone number entry field has been added."}]),p(n,i.change,[{message:"A new phone number entry field has been added."}]),d(n,i.debug,[{message:"A new phone number entry field has been added."}])):d(n,i.debug,[{message:`The limit of phone number inputs (${a.limit}) have been reached.`}])}function d(e,t,n){e.trigger(t,n)}function p(e,t,n){e.trigger(t,n)}(l=r,e.get(a.countriesUrl,function(n){return u=n,l.each(function(n,u){var r=e(u);r.attr("data-form-name")||(l.length>1?r.attr(a.inputNameAttr,`phone_${n}`):r.attr(a.inputNameAttr,a.inputName)),r.attr(a.inputCountryNameAttr)||r.attr(a.inputCountryNameAttr,a.inputCountryName),r.attr(a.inputNumberNameAttr)||r.attr(a.inputNumberNameAttr,a.inputNumberName),r.attr(a.inputDefaultNameAttr)||r.attr(a.inputDefaultNameAttr,a.inputDefaultName),0==r.find(`.${a.lineClass}`).length?o(l,r,null):a.multiple&&console.log('Make sur you have the add button add give the "addLineBtnClass" option.'),e(t).on("click",`.${a.addLineBtnClass}`,function(t){t.preventDefault(),a.multiple?o(l,e(this).closest(r),null):d(l,i.debug,[{message:"multiple option is false. You can't add a new input."}])}),e(t).on("click",`.${a.deleteLineBtnClass}`,function(t){t.preventDefault();const n=e(this).closest(`.${a.lineClass}`),u={country:n.find("select").val(),default:n.find('input[type="checkbox"]').prop("checked"),number:n.find('input[type="text"]').val()};var o=jQuery.Event(i.lineDelete);p(l,o,[{message:"A phone number field is going to be removed",data:u}]),d(l,i.debug,[{message:"A phone number field is going to be removed",data:u}]),o.isDefaultPrevented()||(n.remove(),p(l,i.change,[{message:"A phone number field has been removed",data:u}]),function(t){t.find(`.${a.lineClass}`).each(function(n,i){const u=e(i);u.find("select").attr("name",`${t.attr(a.inputNameAttr)}[${n}][${t.attr(a.inputCountryNameAttr)}]`),u.find('input[type="text"]').attr("name",`${t.attr(a.inputNameAttr)}[${n}][${t.attr(a.inputNumberNameAttr)}]`),u.find('input[type="checkbox"]').attr("name",`${t.attr(a.inputNameAttr)}[${n}][${t.attr(a.inputDefaultNameAttr)}]`)})}(r),d(l,i.debug,[{message:"A phone number field has been removed",data:u}]))})})})).fail(function(){d(r,i.debug,[{message:`Unable to load countries from ${a.countriesUrl}`}])})}}(jQuery,document);